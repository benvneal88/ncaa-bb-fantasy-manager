{% extends "base.html" %}
{% block content %}
  <div class="settings">
    <button id="runPopulateModel">Populate Model</button>
    <script>
        document.getElementById('runPopulateModel').addEventListener('click', function () {
            // Make an asynchronous request to the server to run the code
            fetch('/populate_model', {
                method: 'POST',
            })
            .then(response => response.text())
            .then(data => {
                console.log(data);
                // Handle the response if needed
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
    <div>
      <h3>Console</h3>
      <hr>
      <div id="console"></div>
    </div>
    <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
    <script>
      new gridjs.Grid({
        columns: [
          { id: 'timestamp', name: 'timestamp'},
          { id: 'message', name: 'message' },
        ],
        data: [
          {% for message in messages %}
            {
              timestamp: '{{ message.timestamp }}',
              message: '{{ message.message }}',
            },
          {% endfor %}
        ],
        sort: false,
        pagination: true,
      }).render(document.getElementById('console'));
    </script>
  </div>
{% endblock %}